diff --git a/tecsrc/MASTER.h b/tecsrc/MASTER.h
index 38c495d..d06c371 100644
--- a/tecsrc/MASTER.h
+++ b/tecsrc/MASTER.h
@@ -221,7 +221,7 @@
 #include "stdafx.h"
 
 #if defined MSWIN
-#include "W__BASE.h"
+//#include "W__BASE.h"
 #endif
 
 #include <string>
@@ -524,7 +524,8 @@
 #    if XmVERSION == 1 && XmREVISION == 0
 #    endif
 #  else
-#    include <X11/Intrinsic.h>
+//#    include <X11/Intrinsic.h>
+typedef void *Widget;
 #  endif
 #endif
 
diff --git a/tecsrc/TECXXX.h b/tecsrc/TECXXX.h
index dfcee04..143b771 100644
--- a/tecsrc/TECXXX.h
+++ b/tecsrc/TECXXX.h
@@ -130,7 +130,7 @@
 #endif /* EXTERN_C */
 
 #if !defined (STDCALL)
-# if defined MSWIN
+# if defined MSWIN && !defined (__GNUC__)
 #  define STDCALL __stdcall
 # else /* !MSWIN */
 #  define STDCALL
@@ -138,7 +138,7 @@
 #endif /* STDCALL */
 
 #if !defined (DLLEXPORT)
-# if defined (MSWIN)
+# if defined (MSWIN) && !defined (__GNUC__)
 #  define DLLEXPORT _declspec (dllexport)
 # else
 #  define DLLEXPORT
@@ -154,15 +154,15 @@
 #endif /* DLLIMPORT */
 
 
-#if defined (TECPLOTKERNEL)
-# define LIBCALL
-# define LIBFUNCTION
-#elif defined (MAKEARCHIVE)
-# define LIBCALL STDCALL
-# define LIBFUNCTION EXTERNC DLLEXPORT
-#else /* !TECPLOTKERNAL && !MAKEARCHIVE */
-# define LIBCALL STDCALL
-# define LIBFUNCTION EXTERNC DLLIMPORT
+#if defined (TECPLOTKERNEL)
+# define LIBCALL
+# define LIBFUNCTION
+#elif defined (MAKEARCHIVE)
+# define LIBCALL STDCALL
+# define LIBFUNCTION EXTERNC DLLEXPORT
+#else /* !TECPLOTKERNAL && !MAKEARCHIVE */
+# define LIBCALL STDCALL
+# define LIBFUNCTION EXTERNC DLLIMPORT
 #endif
 
 /*
